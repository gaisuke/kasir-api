# Kasir API (Go)

> A minimal REST API for managing products and categories, built with Go and PostgreSQL. âœ…

---

## ðŸ”§ Project Overview

- Language: Go
- Minimal dependencies: `github.com/lib/pq`, `github.com/spf13/viper`
- Structure: simple layered architecture (handlers â†’ services â†’ repositories â†’ database)

This project exposes endpoints to manage Products and Categories and includes a health check endpoint.

---

## âš™ï¸ Requirements

- Go 1.25.x
- PostgreSQL
- Environment variables (`.env` or system env):
  - `PORT` â€” port to run the HTTP server (e.g. `8080`)
  - `DB_CONN` â€” PostgreSQL DSN (e.g. `postgres://user:pass@host:port/dbname?sslmode=disable`)

---

## ðŸš€ Setup & Run

1. Create a `.env` file in the project root (optional):

```env
PORT=8080
DB_CONN=postgres://user:pass@localhost:5432/kasir_db?sslmode=disable
```

2. Initialize and run the server:

```bash
go run main.go
```

Server will bind to `0.0.0.0:$PORT`.

---

## ðŸ—„ï¸ Database Schema (Example)

Run these statements to create the required tables:

```sql
CREATE TABLE categories (
  id SERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  description TEXT
);

CREATE TABLE products (
  id SERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  price INTEGER NOT NULL,
  stock INTEGER NOT NULL,
  category_id INTEGER REFERENCES categories(id) ON DELETE SET NULL
);
```

> Tip: ensure your `DB_CONN` points to a running Postgres instance and the DB user has proper privileges.

---

## ðŸ“š API Endpoints

| Method | Path | Description |
|--------|------|-------------|
| GET | `/health` | Health check â€” returns `{ "status": "OK", "message": "API Running" }` |
| GET | `/api/categories` | Get all categories |
| POST | `/api/categories` | Create a category (JSON body: `name`, `description`) |
| GET | `/api/categories/{id}` | Get category by ID |
| PUT | `/api/categories/{id}` | Update category by ID (JSON body: `name`, `description`) |
| DELETE | `/api/categories/{id}` | Delete category by ID |
| GET | `/api/products` | Get all products |
| POST | `/api/products` | Create a product (JSON body: `name`, `price`, `stock`, `category_id`) |
| GET | `/api/products/{id}` | Get product by ID (returns joined product + category name) |
| PUT | `/api/products/{id}` | Update product by ID (JSON body: `name`, `price`, `stock`, `category_id`) |
| DELETE | `/api/products/{id}` | Delete product by ID |

### Example request bodies

Create product:

```json
{
  "name": "Masako 250gr",
  "price": 12000,
  "stock": 50,
  "category_id": 3
}
```

Create category:

```json
{
  "name": "Beverages",
  "description": "Drinks and refreshments"
}
```

---

## âœ… Contributing

- PRs are welcome. Keep changes small and focused.
- Run the app locally and try for yourself!

---

*Generated by GitHub Copilot â€” using Raptor mini (Preview)*
